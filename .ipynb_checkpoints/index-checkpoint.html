<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Aid Form</title>
    <link rel="stylesheet" href="./style.css">
<!--     <link rel="icon" href="./favicon.ico" type="image/x-icon"> -->
    <style>
        totalresultscount { display:None;}
        geonames geoname toponymname {display: block;}
        toponymname {font-weight: bold;}
        
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        function checkTitle() {
            var title = document.getElementById("title");

            if (title.value.includes('Personen')) {
                document.getElementById("title-warn").innerHTML = "This title already exists.";
                title.style.backgroundColor = "red";
            } else {
                document.getElementById("title-warn").innerHTML = "";
                title.style.backgroundColor = ''; 
            }
        }
        
        function httpGetAsync(theUrl, callback)
        {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.onreadystatechange = function() { 
                if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                    callback(xmlHttp.responseText);
            }
            xmlHttp.open("GET", theUrl, true); // true for asynchronous 
            xmlHttp.send(null);
        }
        
        function geonamesSuggestions(){
            var place = document.getElementById("place");
            if (place.value === "") {
                alert(document.getElementById("geonames-suggestions").innerHTML);
                document.getElementById("geonames-suggestions").innerHTML = "";
            } else {
                function useList(responseList) {
                    document.getElementById("geonames-suggestions").innerHTML = responseList;
                }
                httpGetAsync("http://api.geonames.org/search?username=research_aids&maxRows=3&countryBias=nl&q="+place.value,
                             useList);
                
            }
        }

    </script>
    <script src="index.js"></script>

  </head>
  <body>
    <main>
        <h1>Research Aid Form</h1>
        <form>
           <label for="level">Level: </label>

            <select name="level" id="level">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          <br><br>

             <label for="title">Title: </label>
            <input type="text" id="title" name="title" onkeyup="checkTitle()" value="PREFILLED"><small id="title-warn" style="color:red;padding:1em;"></small><br><br>

             <label for="place">Place: </label>
            <input type="text" id="place" name="place" onkeyup="geonamesSuggestions()" value=""><br>
            <!-- <datalist id="place-suggestions"></datalist> -->
            <dev id="geonames-suggestions"></dev>
        </form>

    </main>
  </body>
</html>


